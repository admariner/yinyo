apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-server
data:
  store_host: "{{ required "store.host is required" .Values.store.host }}"
  store_bucket: "{{ required "store.bucket is required" .Values.store.bucket }}"
  redis_host: "{{ required "redis.host is required" .Values.redis.host }}"
  {{- if .Values.authenticationURL }}
  authentication_url: {{ .Values.authenticationURL }}
  {{ end }}
  {{- if .Values.usageURL }}
  usage_url: {{ .Values.usageURL }}
  {{ end }}
  run_docker_image: {{ .Values.runImage }}
